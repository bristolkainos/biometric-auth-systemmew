# Comprehensive Thesis Overview: A Multi-Modal Biometric Authentication System

This document provides a detailed technical overview of the Biometric Authentication System, a project designed to offer a secure, scalable, and robust authentication solution using multiple biometric modalities.

## 1. System Architecture

The application is built on a modern, decoupled architecture:

-   **Backend**: An asynchronous API built with **FastAPI** (Python). It handles all business logic, data processing, and communication with the database.
-   **Frontend**: A responsive user interface built with **React** and **TypeScript**, using the **Material-UI** component library. It communicates with the backend via RESTful API calls using **Axios**.
-   **Database**: A **PostgreSQL** relational database for storing all user data, biometric templates, and system logs. **SQLAlchemy** is used as the Object-Relational Mapper (ORM).
-   **Deployment**: The system is configured for deployment on cloud platforms like Railway and GCP, using tools like Docker and Nixpacks for containerization and build management.

---

## 2. Core Features

### 2.1. User and Admin Authentication

-   **Dual Authentication System**: Separate, secure authentication flows for regular users and administrators.
-   **JWT-Based Security**: Implements JSON Web Tokens (JWT) for managing sessions, including access and refresh tokens to ensure secure and persistent logins.
-   **Password Management**: Enforces strong password policies and uses `passlib` with bcrypt for secure password hashing and verification.

### 2.2. Multi-Modal Biometric System

The system supports the enrollment and verification of multiple biometric types.

-   **Supported Modalities**: The primary implementation focuses on **Face** and **Fingerprint** recognition, as handled by the `BiometricService`. The architecture is extensible to other modalities.
-   **Deep Learning for Feature Extraction**: The core of the biometric engine is a pre-trained **ResNet50** model from PyTorch's `torchvision`. It is used as a feature extractor to convert raw biometric images into high-dimensional feature vectors (2048 dimensions).
-   **Biometric Processing Pipeline**:
    1.  **Image Preprocessing**: Images are decoded from Base64, validated, and normalized. This includes resizing to 224x224 pixels and applying standard normalization required by the ResNet50 model.
    2.  **Feature Extraction**: The processed image is passed through the ResNet50 model to generate a feature vector. This is handled by the `PyTorchBiometricService`.
    3.  **Secure Storage**: The extracted feature vector (template) is stored in the database, linked to the user's profile. The original image is discarded to protect user privacy.
-   **Verification Logic**: During login, a new biometric sample is provided. Its feature vector is extracted and compared against the stored template using **Cosine Similarity**. If the similarity score exceeds a predefined threshold, the verification is successful.

### 2.3. API Endpoints

The system exposes a well-structured set of RESTful API endpoints:

-   `/api/v1/auth`: Handles user registration (`/register`), standard login (`/login`), admin login (`/admin/login`), biometric verification (`/verify-biometric`), and token refreshing.
-   `/api/v1/users`: Provides endpoints for authenticated users to manage their profiles (`/me`) and view/delete their enrolled biometric data.
-   `/api/v1/biometric`: Manages the enrollment of new biometric data (`/enroll`) and provides tools for detailed real-time analysis.
-   `/api/v1/admin`: A comprehensive suite of endpoints for administrators.

---

## 3. Administrative and Analytics Dashboard

A key feature of the system is its powerful admin dashboard, which provides deep insights into system usage, security, and performance through a series of data visualizations generated by `matplotlib`.

-   **Dashboard Statistics**: A JSON endpoint (`/admin/dashboard`) provides real-time counts of total/active users, login statistics, and biometric method distribution.
-   **Advanced Analytics Plots**: The system can generate and serve the following plots as PNG images:
    -   **Login Activity**: A time-series analysis of successful vs. failed logins.
    -   **Feature Distribution**: A 3D scatter plot visualizing the clustering of biometric feature vectors.
    -   **System Performance**: Plots for metrics like processing time and quality scores.
    -   **Biometric Usage Treemap**: A visual breakdown of the popularity of each biometric modality.
    -   **Feature Distribution Over Time**: An advanced plot showing the trajectory of feature vectors for different modalities across simulated epochs.
    -   **Cross-Dataset Validation**: A complex visualization comparing performance metrics (like EER, FMR, FNMR) across different datasets and modalities.
-   **Responsive Chart Sizing**: All analytics endpoints accept a `size` query parameter (`small` or `full`) to generate charts suitable for either on-screen display or high-resolution download.

---

## 4. Database Schema

The PostgreSQL database consists of the following primary tables, defined as SQLAlchemy models:

-   `users`: Stores profile information for regular users (username, email, hashed password, etc.).
-   `admin_users`: Stores profile information for administrators.
-   `biometric_data`: Stores the core biometric information, including `user_id`, `biometric_type` (e.g., 'face'), the extracted `feature_vector`, and quality metrics.
-   `login_attempts`: Logs every login attempt, capturing details like success/failure, timestamp, and IP address for security auditing.
-   `blockchain_log`: A table designed to log hashes of critical transactions, providing a tamper-evident audit trail. The `blockchain_service.py` contains the logic to create these hashes.

---

## 5. Code and Project Structure

-   **`main.py`**: The FastAPI application entry point, responsible for setting up middleware and including routers.
-   **`api/v1/`**: Contains all API endpoint logic, organized by resource (`auth`, `users`, `admin`, `biometric`).
-   **`core/`**: Holds core application logic: `config.py` (settings management), `database.py` (DB session management), and `security.py` (authentication and JWT logic).
-   **`biometric_service.py` & `pytorch_biometric_service.py`**: These files contain the logic for biometric processing, feature extraction using PyTorch/ResNet50, and similarity comparison.
-   **`requirements.txt`**: Defines all Python dependencies for the backend.
-   **`frontend/`**: Contains the React/TypeScript frontend application, with its own `package.json` for managing dependencies.
-   **Deployment Scripts**: Includes various scripts (`.ps1`, `.sh`, `.yaml`) and configuration files (`Dockerfile`, `nixpacks.toml`) for automating deployment.
-   **Documentation**: Extensive markdown files (`.md`) explaining setup, deployment, and features.
